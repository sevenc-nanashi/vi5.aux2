// common

syntax = "proto3";

package common;

message RenderRequest {
  int32 render_nonce = 1;
  string object = 2;
  int64 object_id = 3;
  FrameInfo frame_info = 4;
  repeated Parameter parameters = 5;
}

message FrameInfo {
  int32 x = 1;
  int32 y = 2;
  int32 width = 3;
  int32 height = 4;
  int32 current_frame = 5;
  int32 total_frames = 6;
}

message Parameter {
  string key = 1;
  oneof value {
    string str_value = 2;
    string text_value = 3;
    double number_value = 4;
    bool bool_value = 5;
    Color color_value = 6;
  }
}

message Color {
  double r = 1;
  double g = 2;
  double b = 3;
  double a = 4;
}

message ObjectInfo {
  string id = 1;
  string label = 2;
  repeated ParameterDefinition parameter_definitions = 3;
}

message ParameterString {}
message ParameterText {}
message ParameterBoolean {}

enum NumberStep {
  NUMBER_STEP_ONE = 0;
  NUMBER_STEP_POINT_ONE = 1;
  NUMBER_STEP_POINT_ZERO_ONE = 2;
  NUMBER_STEP_POINT_ZERO_ZERO_ONE = 3;
}

message ParameterNumber {
  NumberStep step = 1;
  optional double min = 2;
  optional double max = 3;
}
message ParameterColor {}

message ParameterType {
  oneof kind {
    ParameterString string = 1;
    ParameterText text = 2;
    ParameterBoolean boolean = 3;
    ParameterNumber number = 4;
    ParameterColor color = 5;
  }
}

message ParameterDefinition {
  string key = 1;
  ParameterType type = 2;
  string label = 3;
  Parameter default_value = 4;
}

message BatchRenderRequest {
  repeated common.RenderRequest render_requests = 1;
}
